import{S as r}from"./Supercluster-CVHI3Nw3.js";import{n as a}from"./app-D1dsUHZ8.js";import"./index-Dxbj43yt.js";import"./mapHelpers-B64LXm8J.js";import"./moment-zH0z38ay.js";import"./glify-browser-TJW1xtFG.js";/* empty css            */const n={computed:{errors(){return this.$store.state.errors.errorsObject},errorsExist(){return this.errors&&Object.keys(this.errors).length>0}},methods:{clearError(i){this.errors&&this.errors[i]&&this.$store.commit("clearError",i)},errorExists(i){return this.errors?this.errors.hasOwnProperty(i):!1},getFirstError(i){return this.errors[i][0]}}},o={name:"CreateCleanup",mixins:[n],data(){return{name:"",description:"",time:"",date:"",invite_link:"",processing:!1}},computed:{cleanup(){return this.$store.state.cleanups},getInviteLink(){let i="https://openlittermap.com/cleanups/";return this.invite_link===""?i:i+this.invite_link+"/join"}},methods:{async submit(){this.processing=!0,await this.$store.dispatch("CREATE_CLEANUP_EVENT",{name:this.name,date:this.date,lat:this.cleanup.lat,lon:this.cleanup.lon,time:this.time,description:this.description,invite_link:this.invite_link}),this.processing=!1}}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cleanup-container"},[e("form",{attrs:{method:"post"},on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)},keydown:function(s){return t.clearError(s.target.name)}}},[e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v("Name")]),t.errorExists("name")?e("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.getFirstError("name"))}}):t._e()]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input mb1",class:t.errorExists("name")?"is-danger":"",attrs:{name:"name",placeholder:"My Awesome Cleanup",required:""},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}}),e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v("Date")]),t.errorExists("date")?e("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.getFirstError("date"))}}):t._e()]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"input mb1",class:t.errorExists("date")?"is-danger":"",attrs:{name:"date",type:"date"},domProps:{value:t.date},on:{input:function(s){s.target.composing||(t.date=s.target.value)}}}),e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v("Location:")]),t.errorExists("lat")||t.errorExists("lon")?e("div",[e("p",{staticClass:"help is-danger"},[t._v(" You have not set a location. ")])]):t._e()]),e("div",{staticClass:"mb1"},[t.cleanup.lat?e("div",[e("p",[t._v(" Lat: "+t._s(t.cleanup.lat)+" ")]),e("p",[t._v(" Lon: "+t._s(t.cleanup.lon)+" ")])]):e("p",[t._v(" Click anywhere on the map to set the location ")])]),e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v("Time")]),t.errorExists("time")?e("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.getFirstError("time"))}}):t._e()]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"input mb1",class:t.errorExists("time")?"is-danger":"",attrs:{name:"time",placeholder:"Enter time",required:""},domProps:{value:t.time},on:{input:function(s){s.target.composing||(t.time=s.target.value)}}}),e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v("Description")]),t.errorExists("description")?e("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.getFirstError("description"))}}):t._e()]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"input mb1",class:t.errorExists("description")?"is-danger":"",staticStyle:{height:"2.65em"},attrs:{name:"description",placeholder:"Enter information about your event",required:""},domProps:{value:t.description},on:{input:function(s){s.target.composing||(t.description=s.target.value)}}}),e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v(" Create an invite link ")]),t.errorExists("invite_link")?e("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.getFirstError("invite_link"))}}):t._e()]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.invite_link,expression:"invite_link"}],staticClass:"input mb-05",class:t.errorExists("invite_link")?"is-danger":"",attrs:{name:"invite_link",placeholder:"openlittermap.com/cleanups/my-cleanup-event"},domProps:{value:t.invite_link},on:{input:function(s){s.target.composing||(t.invite_link=s.target.value)}}}),e("p",{staticClass:"is-grey mb2"},[t._v(" "+t._s(t.getInviteLink)+" ")]),e("div",{staticClass:"flex"},[e("button",{staticClass:"button is-info is-medium",class:t.processing?"is-loading":"",attrs:{disabled:t.processing,type:"submit"}},[t._v(" Let's Cleanup! ")])])])])},c=[],p=a(o,l,c,!1,null,"6fc26179");const u=p.exports,m={name:"JoinCleanup",data(){return{invite_link:"",processing:!1}},mixins:[n],methods:{async submit(){this.processing=!0,await this.$store.dispatch("JOIN_CLEANUP",{link:this.invite_link}),this.processing=!1}}};var d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"has-text-left"},[e("form",{attrs:{method:"post"},on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)},keydown:function(s){return t.clearError(s.target.name)}}},[e("div",{staticClass:"flex"},[e("p",{staticClass:"flex-1"},[t._v("Join a cleanup")]),t.errorExists("invite_link")?e("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.getFirstError("invite_link"))}}):t._e()]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.invite_link,expression:"invite_link"}],staticClass:"input",class:t.errorExists("invite_link")?"is-danger":"",attrs:{name:"invite_link",required:"",placeholder:"Enter invitation code to join a cleanup"},domProps:{value:t.invite_link},on:{input:function(s){s.target.composing||(t.invite_link=s.target.value)}}}),e("div",{staticClass:"flex mt1 jc"},[e("button",{staticClass:"button is-info is-medium",class:t.processing?"is-loading":"",attrs:{disabled:t.processing,type:"submit"}},[t._v(" Join Cleanup! ")])])])])},_=[],v=a(m,d,_,!1,null,"65f99a5b");const C=v.exports,g="https://img.freepik.com/free-vector/volunteers-cleaning-up-garbage-city-park_74855-17942.jpg?w=1380&t=st=1659282438~exp=1659283038~hmac=b3c1ecc87fa677a97391b1f182f0e8674f32684d632f8d5df366bfe8204ee62e",f={name:"CleanupSidebar",components:{CreateCleanup:u,JoinCleanup:C},props:["creatingCleanup","joiningCleanup"],data(){return{processing:!1}},computed:{auth(){return this.$store.state.user.auth},getCreateCleanupImg(){return g},getTitle(){return this.$store.state.globalmap.creating?"Create a new cleanup event!":"Help us clean the planet!"}},methods:{goBack(){this.$store.commit("clearErrors"),this.$store.commit("creatingCleanup",!1),this.$store.commit("joiningCleanup",!1)},startCreatingCleanup(){this.$store.commit("creatingCleanup",!0)},startJoiningCleanup(){this.$store.commit("joiningCleanup",!0)}}};var h=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"pt3 pb3 flex",staticStyle:{"align-items":"center"}},[t.joiningCleanup||t.creatingCleanup?e("i",{staticClass:"fa fa-arrow-left pointer",on:{click:t.goBack}}):t._e(),e("p",{staticClass:"title is-3 flex-1"},[t._v(" "+t._s(t.getTitle)+" ")])]),e("div",{staticClass:"cleanup-buttons"},[!t.creatingCleanup&&!t.joiningCleanup?e("div",[e("img",{staticClass:"pb1",attrs:{src:t.getCreateCleanupImg}}),t.auth?e("div",[e("button",{staticClass:"button is-medium is-info mb1",on:{click:t.startCreatingCleanup}},[t._v(" Create a cleanup ")]),e("button",{staticClass:"button is-medium is-primary mb1",on:{click:t.startJoiningCleanup}},[t._v(" Join a cleanup ")])]):e("p",{staticClass:"mb1"},[t._v(" Log In to Create or Join a Cleanup ")]),e("p",{staticClass:"mb1"},[t._v(" Cleanups are a great way to bring people together, quantify, and communicate your positive environmental impact. ")]),e("p",[t._v(" Clean up, have fun and share data! ")])]):t._e(),t.creatingCleanup?e("CreateCleanup"):t._e(),t.joiningCleanup?e("JoinCleanup"):t._e()],1)])},x=[],b=a(f,h,x,!1,null,"4ce4c465");const E=b.exports,k={name:"Cleanups",components:{Supercluster:r,CleanupSidebar:E},data(){return{loading:!1}},async created(){this.loading=!0,await this.$store.dispatch("GET_CLEANUPS");const i=this.$route;i.params.hasOwnProperty("invite_link")&&await this.$store.dispatch("JOIN_CLEANUP",{link:i.params.invite_link}),this.loading=!1},computed:{creatingCleanup(){return this.$store.state.cleanups.creating},joiningCleanup(){return this.$store.state.cleanups.joining}}};var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cleanups-container"},[e("CleanupSidebar",{staticClass:"cleanup-sidebar",class:t.creatingCleanup?"find-location":"",attrs:{creatingCleanup:t.creatingCleanup,joiningCleanup:t.joiningCleanup}}),e("div",{staticClass:"cleanup-map",class:t.creatingCleanup?"find-location":""},[t.loading?e("div"):e("Supercluster",{attrs:{activeLayer:"cleanups"}})],1)],1)},$=[],w=a(k,y,$,!1,null,"7732288b");const I=w.exports;export{I as default};
