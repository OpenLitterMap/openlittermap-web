import{L as _}from"./vue-loading-DP2NzCYO.js";import{h as m}from"./moment-zH0z38ay.js";import{n}from"./app-CyeqFB3p.js";/* empty css            */const u={name:"LeaderboardFilters",props:["locationType","locationId"],data(){return{processing:!1,selected:"today",options:["all-time","today","yesterday","this-month","last-month","this-year"]}},methods:{async changeOption(e){this.selected=e,this.processing=!0,this.locationId&&this.locationType?await this.$store.dispatch("GET_USERS_FOR_LOCATION_LEADERBOARD",{timeFilter:e,locationId:this.locationId,locationType:this.locationType}):await this.$store.dispatch("GET_USERS_FOR_GLOBAL_LEADERBOARD",e),this.processing=!1},getNameForOption(e){return e==="today"?"Today":e==="yesterday"?"Yesterday":e==="this-month"?"This Month":e==="last-month"?"Last Month":e==="this-year"?"This Year":e==="all-time"?"All Time":""},async optionChanged(e){const t=e.target.value;this.selected=t,this.processing=!0,await this.$store.dispatch("GET_GLOBAL_LEADERBOARD",t),this.processing=!1}}};var h=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"leaderboard-filters-container"},t._l(t.options,function(a){return s("p",{staticClass:"leaderboard-option",class:a===t.selected?"is-selected":"",on:{click:function(o){return t.changeOption(a)}}},[t._v(" "+t._s(t.getNameForOption(a))+" ")])}),0),s("div",{staticClass:"mobile-filters-container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"input mb1",on:{change:[function(a){var o=Array.prototype.filter.call(a.target.options,function(i){return i.selected}).map(function(i){var r="_value"in i?i._value:i.value;return r});t.selected=a.target.multiple?o:o[0]},t.optionChanged]}},t._l(t.options,function(a){return s("option",{domProps:{value:a}},[t._v(" "+t._s(t.getNameForOption(a))+" ")])}),0)])])},p=[],v=n(u,h,p,!1,null,"4aab6639");const f=v.exports,l="/build/assets/gold-medal-2-DT1ucjbO.png",c="/build/assets/silver-medal-2-Dx0QRhyS.png",d="/build/assets/bronze-medal-2-DyRiKOrS.png",g={name:"LeaderboardList",props:["leaders","locationId","locationType"],components:{LeaderboardFilters:f},methods:{getCountryFlag(e){return e?(e=e.toLowerCase(),"/assets/icons/flags/"+e+".png"):""},getPosition(e){return m.localeData().ordinal(e)}}};var b=function(){var t=this,s=t._self._c;return s("div",{staticClass:"global-leaders"},[s("LeaderboardFilters",{attrs:{locationId:t.locationId,locationType:t.locationType}}),t.leaders.length===0?s("div",[s("p",{staticClass:"empty-leaderboard-title"},[t._v("Nobody has uploaded yet!")])]):t._e(),t._l(t.leaders,function(a,o){return s("div",{staticClass:"leader wow slideInLeft"},[a.rank?s("div",{staticClass:"medal"},[a.rank===1?s("img",{attrs:{src:l,alt:"Gold spot"}}):t._e(),a.rank===2?s("img",{attrs:{src:c,alt:"Silver spot"}}):t._e(),a.rank===3?s("img",{attrs:{src:d,alt:"Bronze spot"}}):t._e()]):s("div",{staticClass:"medal"},[o===0?s("img",{attrs:{src:l,alt:"Gold spot"}}):t._e(),o===1?s("img",{attrs:{src:c,alt:"Silver spot"}}):t._e(),o===2?s("img",{attrs:{src:d,alt:"Bronze spot"}}):t._e()]),s("div",{staticClass:"rank"},[a.rank?s("span",[t._v(t._s(t.getPosition(a.rank)))]):s("span",[t._v(t._s(t.getPosition(o+1)))]),s("div",{staticClass:"flag"},[s("img",{directives:[{name:"show",rawName:"v-show",value:a.global_flag,expression:"leader.global_flag"}],attrs:{src:t.getCountryFlag(a.global_flag),alt:a.global_flag}})])]),s("div",{staticClass:"details"},[s("div",{staticClass:"name"},[a.name||a.username?s("span",[t._v(t._s(a.name)+" "+t._s(a.username))]):s("span",[t._v(t._s(t.$t("common.anonymous")))])]),a.team?s("div",{staticClass:"team"},[t._v(" "+t._s(t.$t("common.team"))+" "+t._s(a.team)+" ")]):t._e(),a.social?s("div",{staticClass:"social-container"},t._l(a.social,function(i,r){return s("a",{attrs:{target:"_blank",href:i}},[s("i",{staticClass:"fa",class:r==="personal"?"fa-link":`fa-${r}`})])}),0):t._e()]),a.social?s("div",{staticClass:"social-container"},t._l(a.social,function(i,r){return s("a",{attrs:{target:"_blank",href:i}},[s("i",{staticClass:"fa",class:r==="personal"?"fa-link":`fa-${r}`})])}),0):t._e(),s("div",{staticClass:"xp"},[s("div",{staticClass:"value"},[t._v(t._s(a.xp))]),s("div",{staticClass:"text"},[t._v("XP")])])])})],2)},C=[],w=n(g,b,C,!1,null,"5ae5a51c");const y=w.exports,L={name:"Leaderboard",components:{Loading:_,LeaderboardList:y},data(){return{loading:!0}},async created(){this.loading=!0,await this.$store.dispatch("GET_USERS_FOR_GLOBAL_LEADERBOARD","today"),this.loading=!1},computed:{leaderboard(){return this.$store.state.leaderboard}},methods:{async loadPreviousPage(){this.loading=!0,window.scrollTo({top:0,behavior:"smooth"}),await this.$store.dispatch("GET_PREVIOUS_LEADERBOARD_PAGE"),this.loading=!1},async loadNextPage(){this.loading=!0,window.scrollTo({top:0,behavior:"smooth"}),await this.$store.dispatch("GET_NEXT_LEADERBOARD_PAGE"),this.loading=!1},openWorldCup(){this.$router.push({path:"/world"})}}};var $=function(){var t=this,s=t._self._c;return s("section",{staticClass:"is-link hero is-bold is-fullheight"},[s("section",{staticClass:"wrapper is-link is-bold"},[s("div",{staticClass:"leaderboard-heading",on:{click:t.openWorldCup}},[s("i",{staticClass:"fa fa-arrow-left has-text-white"}),s("h3",{staticClass:"title is-2 has-text-centered has-text-white"},[t._v(" "+t._s(t.$t("location.global-leaderboard"))+" ")])]),t.loading?s("loading",{attrs:{active:!0,"is-full-page":!0,"background-color":"transparent",color:"white"}}):t._e(),t.loading?t._e():s("div",[s("LeaderboardList",{attrs:{leaders:t.leaderboard.users}}),t.leaderboard.users.length?s("div",{staticClass:"flex jc"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.leaderboard.currentPage>1,expression:"leaderboard.currentPage > 1"}],staticClass:"button is-medium mr-1",on:{click:t.loadPreviousPage}},[t._v(" "+t._s(t.$t("common.previous"))+" ")]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.leaderboard.hasNextPage,expression:"leaderboard.hasNextPage"}],staticClass:"button is-medium",on:{click:t.loadNextPage}},[t._v(" "+t._s(t.$t("common.next"))+" ")])]):t._e()],1)],1)])},E=[],R=n(L,$,E,!1,null,"2d78ff5e");const x=R.exports;export{x as default};
