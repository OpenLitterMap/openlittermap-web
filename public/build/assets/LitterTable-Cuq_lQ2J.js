import{n as l}from"./app-ByiNnCej.js";const n={name:"FilterPhotos",props:["action","parent"],methods:{async getData(){await this.$store.dispatch(this.action)}},computed:{countries(){return this.$store.state.locations.countryNames},filterTag:{get(){return this.$store.state.user.filterPhotos.filterTag},set(a){this.$store.commit("setFilterTag",a)}},filterCustomTag:{get(){return this.$store.state.user.filterPhotos.filterCustomTag},set(a){this.$store.commit("setFilterCustomTag",a)}},filterDateFrom:{get(){return this.$store.state.user.filterPhotos.filterDateFrom},set(a){this.$store.commit("setFilterDateFrom",a)}},filterDateTo:{get(){return this.$store.state.user.filterPhotos.filterDateTo},set(a){this.$store.commit("setFilterDateTo",a)}},filterCountry:{get(){return this.$store.state.user.filterPhotos.filterCountry},set(a){this.$store.commit("setFilterCountry",a)}},paginationAmount:{get(){return this.$store.state.user.filterPhotos.paginationAmount},set(a){this.$store.commit("setFilterPhotosPaginationAmount",a)}}}};var c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-item"},[e("label",{attrs:{for:"filterTag"}},[t._v(" Tag ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterTag,expression:"filterTag"}],staticClass:"input",attrs:{id:"filterTag",name:"filterTag",placeholder:"Enter a tag"},domProps:{value:t.filterTag},on:{input:function(o){o.target.composing||(t.filterTag=o.target.value)}}})]),e("div",{staticClass:"filter-item"},[e("label",{attrs:{for:"filterCustomTag"}},[t._v(" Custom Tag ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterCustomTag,expression:"filterCustomTag"}],staticClass:"input",attrs:{id:"filterCustomTag",name:"filterCustomTag",placeholder:"Enter a custom tag"},domProps:{value:t.filterCustomTag},on:{input:function(o){o.target.composing||(t.filterCustomTag=o.target.value)}}})]),e("div",{staticClass:"filter-item"},[e("label",{attrs:{for:"uploadedFrom"}},[t._v(" Uploaded From ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterDateFrom,expression:"filterDateFrom"}],staticClass:"input",attrs:{id:"uploadedFrom",name:"uploadedFrom",type:"date",placeholder:"From"},domProps:{value:t.filterDateFrom},on:{input:function(o){o.target.composing||(t.filterDateFrom=o.target.value)}}})]),e("div",{staticClass:"filter-item"},[e("label",{attrs:{for:"uploadedTo"}},[t._v(" Uploaded To ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterDateTo,expression:"filterDateTo"}],staticClass:"input",attrs:{id:"uploadedTo",name:"uploadedTo",type:"date",placeholder:"To"},domProps:{value:t.filterDateTo},on:{input:function(o){o.target.composing||(t.filterDateTo=o.target.value)}}})]),t.parent==="global"?e("div",{staticClass:"filter-item"},[e("label",{attrs:{for:"filterCountry"}},[t._v(" Country ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterCountry,expression:"filterCountry"}],staticClass:"input",on:{change:function(o){var r=Array.prototype.filter.call(o.target.options,function(i){return i.selected}).map(function(i){var s="_value"in i?i._value:i.value;return s});t.filterCountry=o.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"all",selected:""}},[t._v("All")]),t._l(t.countries,function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v(t._s(o.country))])})],2)]):t._e(),e("div",{staticClass:"filter-item"},[e("label",{attrs:{for:"uploadedTo"}},[t._v(" Amount ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.paginationAmount,expression:"paginationAmount"}],staticClass:"input",on:{change:function(o){var r=Array.prototype.filter.call(o.target.options,function(i){return i.selected}).map(function(i){var s="_value"in i?i._value:i.value;return s});t.paginationAmount=o.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"25"}},[t._v("25")]),e("option",{attrs:{value:"50"}},[t._v("50")]),e("option",{attrs:{value:"100"}},[t._v("100")])])]),e("button",{staticClass:"button is-small is-primary",staticStyle:{"margin-top":"25px"},on:{click:t.getData}},[t._v("Apply Filters")])])},u=[],d=l(n,c,u,!1,null,"f169fac0");const m=d.exports,p={name:"LitterTable",components:{FilterPhotos:m},props:["title","action","paginatedPhotos"],data(){return{showCopyNotification:!1,currentPage:1,lastPage:1}},methods:{getCustomTags(a){return a.map(t=>t.tag).join(", ")},async copyLinkToClipboard(a){const t=`https://openlittermap.com/global?lat=${a.lat}&lon=${a.lon}&zoom=17&photo=${a.id}`;if(navigator.clipboard)try{await navigator.clipboard.writeText(t);return}catch(e){console.error("Failed to copy with Clipboard API: ",e)}this.copyToFallbackClipboard(t)},copyToFallbackClipboard(a){const t=document.createElement("textarea");t.value=a,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error("Fallback copy to clipboard failed: ",e)}finally{document.body.removeChild(t)}},openLinkNewTab(a){const t=`${window.location.origin}/global?lat=${a.lat}&lon=${a.lon}&zoom=17&photo=${a.id}`;window.open(t,"_blank")},async loadPreviousPage(){const a=this.paginatedPhotos.current_page-1;await this.$store.dispatch(this.action,a)},async loadNextPage(){const a=this.paginatedPhotos.current_page+1;await this.$store.dispatch(this.action,a)}}};var g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"uploads-container"},[e("h3",{staticClass:"uploads-title"},[t._v(" "+t._s(this.title)+" "),e("span",[t._v(" ("+t._s(this.paginatedPhotos.total)+")")])]),e("FilterPhotos",{attrs:{action:this.action,parent:"global"}}),e("div",{staticClass:"table-wrapper"},[e("table",{staticClass:"uploads-table"},[t._m(0),e("tbody",t._l(t.paginatedPhotos.data,function(o){return e("tr",{key:o.id},[e("td",[t._v(" "+t._s(o.id)+" ")]),e("td",[t._v(" "+t._s(o.result_string?o.result_string:"No tags")+" ")]),e("td",[t._v(" "+t._s(o.custom_tags.length?t.getCustomTags(o.custom_tags):"No tags")+" ")]),e("td",[t._v(" "+t._s(o.datetime)+" ")]),e("td",{staticStyle:{"max-width":"15em"}},[t._v(" "+t._s(o.display_name)+" ")]),e("td",{staticClass:"centre-table-buttons"},[e("button",{on:{click:function(r){return t.copyLinkToClipboard(o)}}},[t._v(" Copy Link ")]),e("button",{on:{click:function(r){return t.openLinkNewTab(o)}}},[t._v(" Open ")])])])}),0)])]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:this.paginatedPhotos.current_page===1},on:{click:t.loadPreviousPage}},[t._v(" Previous ")]),e("p",[t._v(t._s(this.paginatedPhotos.current_page))]),e("button",{attrs:{disabled:this.paginatedPhotos.next_page_url===null},on:{click:t.loadNextPage}},[t._v(" Next ")])])],1)},v=[function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",[a._v("ID")]),t("th",[a._v("Tags")]),t("th",[a._v("Custom Tags")]),t("th",[a._v("Taken at")]),t("th",{staticStyle:{"max-width":"15em"}},[a._v("Address")]),t("th",[a._v("Actions")])])])}],f=l(p,g,v,!1,null,"03a1a97e");const h=f.exports;export{h as L};
