import{h as r}from"./moment-zH0z38ay.js";import{L as n}from"./vue-loading-DLZy8mGo.js";/* empty css                    */import{n as o,A as l,P as c,T as g,b as u}from"./app-BKJqQt33.js";import{R as _}from"./RecentTags-CHIXaOhX.js";/* empty css            */const m={name:"Tag",components:{Loading:n,AddTags:l,Presence:c,Tags:g,ProfileDelete:u,RecentTags:_},async mounted(){this.loading=!0,await this.$store.dispatch("GET_CURRENT_USER"),await this.$store.dispatch("GET_PHOTOS_FOR_TAGGING"),this.loading=!1},data(){return{loading:!0}},computed:{current_page(){return this.$store.state.photos.paginate.current_page},hasRecentTags(){return Object.keys(this.$store.state.litter.recentTags).length>0||this.$store.state.litter.recentCustomTags.length>0},photos(){var e,t,s;return(s=(t=(e=this.$store.state)==null?void 0:e.photos)==null?void 0:t.paginate)==null?void 0:s.data},previous_page(){var e;return(e=this.$store.state.photos.paginate)==null?void 0:e.prev_page_url},remaining(){return this.$store.state.photos.remaining},show_current_page(){return this.$store.state.photos.paginate.current_page>1},show_next_page(){return this.$store.state.photos.paginate.next_page_url},user(){return this.$store.state.user.user}},methods:{getDate(e){return r(e).format("LLL")},goToPage(e){this.$store.dispatch("SELECT_IMAGE",e)},nextImage(){this.$store.dispatch("NEXT_IMAGE")},previousImage(){this.$store.dispatch("PREVIOUS_IMAGE")}}};var d=function(){var t=this,s=t._self._c;return s("section",{staticClass:"hero fullheight is-primary is-bold tag-container"},[t.loading?s("loading",{attrs:{"is-full-page":!0},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}}):s("div",{staticClass:"pt2"},[t.photos.length===0?s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container has-text-centered"},[s("h3",{staticClass:"subtitle is-1"},[t._v(" "+t._s(t.$t("tags.no-tags"))+" ")]),s("router-link",{attrs:{to:"/submit"}},[s("h3",{staticClass:"subtitle button is-medium is-info hov"},[t._v(" "+t._s(t.$t("tags.please-upload"))+" ")])])],1)]):s("div",t._l(t.photos,function(a){return s("div",{key:a.id,staticClass:"mb2"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column",attrs:{id:"image-metadata"}},[s("div",{staticClass:"box image-metadata-box"},[s("ul",[s("li",{staticClass:"list-group-item"},[t._v(" "+t._s(t.$t("tags.to-tag"))+": "+t._s(t.remaining)+" ")]),s("li",{staticClass:"list-group-item"},[t._v(" "+t._s(t.$t("tags.total-uploaded"))+": "+t._s(t.user.total_images)+" ")]),a.team?s("li",{staticClass:"list-group-item"},[t._v(" "+t._s(t.$t("common.team"))+": "),s("strong",[t._v(t._s(a.team.name))])]):t._e(),s("li",{staticClass:"list-group-item"},[t._v(" Next Littercoin: "+t._s(t.user.littercoin_progress)+"% ")]),s("li",{staticClass:"list-group-item"},[t._v(" Total Littercoin: "+t._s(t.user.total_littercoin)+" ")])]),s("router-link",{attrs:{to:"/bulk-tag"}},[s("button",{staticClass:"button is-primary bulk-tag-btn"},[t._v("Tag in bulk")])])],1),t.hasRecentTags?s("div",{staticClass:"box control has-text-centered"},[s("RecentTags",{attrs:{"photo-id":a.id}})],1):t._e()]),t._v(" "),s("div",{staticClass:"column is-6 image-wrapper"},[s("div",{staticClass:"image-content"},[s("img",{directives:[{name:"img",rawName:"v-img",value:{sourceButton:!0},expression:"{ sourceButton: true }"}],staticClass:"img",attrs:{src:a.filename}})]),s("div",{staticClass:"column is-10 is-offset-1 mt-4"},[s("add-tags",{attrs:{id:a.id}})],1)]),s("div",{staticClass:"column is-3",attrs:{id:"image-counts"}},[s("div",{staticClass:"box"},[s("p",{staticClass:"list-group-item"},[s("strong",[t._v(" #"+t._s(a.id)+": ")]),t._v(" "+t._s(t.$t("tags.taken"))+" "+t._s(t.getDate(a.datetime))+" ")]),s("p",{staticClass:"list-group-item"},[s("strong",[t._v(t._s(t.$t("tags.coordinates"))+": ")]),t._v(" "+t._s(a.lat)+", "+t._s(a.lon)+" ")]),s("p",{staticClass:"list-group-item"},[s("strong",[t._v(t._s(t.$t("tags.address"))+": ")]),t._v(" "+t._s(a.display_name)+" ")]),s("p",{staticClass:"list-group-item"},[s("strong",[t._v(t._s(t.$t("tags.device"))+": ")]),t._v(" "+t._s(a.model)+" ")]),s("presence",{key:a.id}),s("profile-delete",{staticClass:"mt-4",attrs:{photoid:a.id}})],1),s("Tags",{attrs:{"photo-id":a.id}})],1)]),s("div",{staticClass:"column",staticStyle:{"text-align":"center"}},[s("div",{staticClass:"has-text-centered mt3em"},[s("a",{directives:[{name:"show",rawName:"v-show",value:t.previous_page,expression:"previous_page"}],staticClass:"pagination-previous has-background-link has-text-white",on:{click:t.previousImage}},[t._v(t._s(t.$t("tags.previous")))]),s("a",{directives:[{name:"show",rawName:"v-show",value:t.remaining>t.current_page,expression:"remaining > current_page"}],staticClass:"pagination-next has-background-link has-text-white",on:{click:t.nextImage}},[t._v(t._s(t.$t("tags.next")))])])]),s("div",{staticClass:"column"},[s("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[s("ul",{staticClass:"pagination-list"},t._l(t.remaining,function(i){return s("li",{key:i},[s("a",{class:i===t.current_page?"pagination-link is-current":"pagination-link",attrs:{"aria-label":"page"+t.current_page,"aria-current":t.current_page},on:{click:function(h){return t.goToPage(i)}}},[t._v(t._s(i))])])}),0)])])])}),0)])],1)},p=[],v=o(m,d,p,!1,null,"9b9cefd4");const k=v.exports;export{k as default};
